# examCards

## Задание

Преподавателю надо печатать билеты и при этом потратить как можно меньше бумаги. Упорядочите билеты так, чтобы они занимали наименьшее число листов A4, между ними было место для разреза, у листа были поля сверху и снизу, и ни один билет не оказался «разорван» между листами.

## Теоретическая часть

Для решения предложенного задания его можно свести к задаче об упаковке в контейнеры.

> Задача об упаковке в контейнеры — NP-трудная комбинаторная задача. Задача заключается в упаковке объектов предопределённой формы в конечное число контейнеров предопределённой формы таким способом, чтобы число использованных контейнеров было наименьшим или количество или объём объектов (которые упаковывают) были наибольшими.

Существует множество разновидностей этой задачи (двумерная упаковка, линейная упаковка, упаковка по весу, упаковка по стоимости и т.п.), которые могут применяться в разных областях, как собственно в вопросе оптимального заполнения контейнеров, загрузки грузовиков с ограничением по весу, созданием резервных копий на съёмных носителях и т. д. Так как задача является NP-трудной, то использование точного переборного алгоритма возможно только при небольших размерностях. Обычно для решения задачи используют эвристические приближённые полиномиальные алгоритмы.

### Математическая формулировка задачи

Пусть дано множество контейнеров размера V и множество n предметов размеров a_1,...,a_n. Надо найти целое число контейнеров B и разбиение множества {1,...,n} на B подмножеств S_1 U ... U S_B таких, что sum(a_j<=V) для всех k=1,...,B. Решение называется оптимальным, если B минимально. Минимальное B далее обозначается OPT.

В случае нашей задачи примем высоту листа А4 за вместимость контейнера. В представленной задаче высота листов А4 одинакова, как и вместимость контейнеров. Примем поля сверху, снизу и высоту места для разреза одинаковыми и для удобства высоту листа возьмем равной высоте обычного листа А4 минус поле сверху. За размер предмета примем высоту одного экзаменационного билета плюс поле под самим билетом (место для разреза). Будем рассматривать одномерные контейнеры.

### Варианты решения

Задачу об упаковке в контейнеры можно решить несколькими способами.

### Упаковка как задача целочисленного программирования
Задача упаковки в контейнеры может быть сформулирована как задача целочисленного программирования следующим образом:
Минимизировать B=sum(y_i), i=1,...,n
при ограничениях j=1,...n sum(a_j\*x_ij)<=Vy_i для любого i из множества {1,...,n}
sum(x_ij)=1 i=1,...,n для любого j из множества {1,...,n}
y_i и x_ij принадлежат множеству {0,1} для любых i и j из множества {1,...,n}
где y_i=1, если контейнер i используется и x_ij=1, если предмет j помещен в контейнер i.

### Приближенные полиномиальные алгоритмы
### Алгоритмы типа On-line
Предметы поступают в непредсказуемом порядке. Требуется упаковать их в минимальное число контейнеров. Упакованный предмет нельзя перемещать в другой контейнер. Место для предварительного хранения предметов отсутствует.

#### Алгоритм "Следующий подходящий" (NF)
В произвольном порядке упаковываем предметы по следующему правилу.
Первый предмет помещаем в первый контейнер. На k-м шаге пытаемся поместить k-й предмет в текущий контейнер. Если предмет входит, то помещаем его и переходим к следующему шагу, иначе помещаем предмет в новый контейнер.
T = O(n), П = O(1), если не считать место для исходных данных.
Теорема. NF(L) <= 2OPT(L), где L={1,...n} - множество предметов.

#### Алгоритм "Первый подходящий" (FF)
В произвольном порядке упаковываем предметы по следующему правилу.
Первый предмет помещаем в первый контейнер. На k-м шаге находим контейнер с наименьшим номеров, куда помещается k-й предмет, и помещаем его туда. Если такого контейнера нет, то берем новый пустой контейнер и помещаем предмет в него.
T = O(n^2), П = O(n).
Теорема. FF(L) <= \[17/10 OPT(L) + 1] (с округлением в большую сторону) для всех L и существуют примеры со сколь угодно большими значениями OPT, для которых FF(L) >= \[17/10 OPT(L) - 1] (с округлением в большую сторону).

#### Алгоритм "Наилучший подходящий" (BF)
В произвольном порядке упаковываем предметы по следующему правилу.
Первый предмет помещаем в первый контейнер. На k-м шаге размещаем k-й предмет. Находим частично заполненнные контейнеры, где достаточно для него свободного места и выбираем среди них наиболее заполненний. Если таких нет, то берем новый пустой контейнер и помещаем k-й предмет в него.
T = O(n^2), П = O(n).
Теорема. R(BF) = R(FF) и существуют примеры со сколь угодно большими значениями OPT(L), для которых BF(L) = 4/3 FF(L) и FF(L) = 3/2 BF(L)


### Формат входных и выходных данных

* Входные данные: список из весов предметов (высот экзаменационных билетов в мм). Например, 25, 28, 30, 41, 37.
* Выходные данные: номер листа и номера билетов, которые нужно расположить на этом листе. Например, 2: 17, 10, 26, 5, 11.

### План решения задания
